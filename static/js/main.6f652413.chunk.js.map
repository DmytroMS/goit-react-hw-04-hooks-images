{"version":3,"sources":["App.module.css","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","servises/api-services.js","App.js","index.js"],"names":["module","exports","Searchbar","onSubmit","useState","query","setQuery","className","e","preventDefault","trim","toast","warn","type","value","onChange","currentTarget","toLowerCase","autoComplete","autoFocus","placeholder","ImageGalleryItem","image","toggleModal","handleSetLargeImageURL","largeImageURL","src","webformatURL","onClick","alt","ImageGallery","images","map","id","Button","onLoadMore","modalRoot","document","querySelector","Modal","onClose","children","useEffect","window","addEventListener","handleKeyDown","removeEventListener","code","createPortal","event","target","axios","defaults","baseURL","App","hits","setHits","showModal","setShowModal","setlargeImageURL","page","setPage","isLoading","setIsLoading","getImages","nextQuery","get","then","res","data","getPictures","prev","scrollTo","top","documentElement","scrollHeight","behavior","catch","error","console","log","renderLoadMoreBttn","length","s","position","transition","Flip","autoClose","theme","prevState","loaderwrapper","color","height","width","timeout","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6f652413.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__Bob_-\",\"loaderwrapper\":\"App_loaderwrapper__27OCK\"};","import react, { useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport default function Searchbar({ onSubmit }) {\r\n  const [query, setQuery] = useState(\"\");\r\n\r\n  const handleChangeQuery = (e) => {\r\n    setQuery(e.currentTarget.value.toLowerCase());\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (query.trim() === \"\") {\r\n      return toast.warn(\"Please, specify your search\");\r\n    }\r\n    onSubmit(query);\r\n    setQuery(\"\");\r\n  };\r\n\r\n  return (\r\n    <header className=\"Searchbar\">\r\n      <form onSubmit={handleSubmit} className=\"SearchForm\">\r\n        <button type=\"submit\" className=\"SearchForm-button\">\r\n          <span className=\"SearchForm-button-label\">Search</span>\r\n        </button>\r\n\r\n        <input\r\n          value={query}\r\n          onChange={handleChangeQuery}\r\n          className=\"SearchForm-input\"\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images and photos\"\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n}\r\n\r\n// class Searchbar extends Component {\r\n//   state = {\r\n//     query: \"\",\r\n//   };\r\n\r\n// handleChangeQuery = (e) => {\r\n//   this.setState({ query: e.currentTarget.value.toLowerCase() });\r\n//   // [e.currentTarget.name]: e.currentTarget.value,\r\n// };\r\n\r\n// handleSubmit = (e) => {\r\n//   e.preventDefault();\r\n\r\n//   if (this.state.query.trim() === \"\") {\r\n//     return toast.warn(\"Please, specify your search\");\r\n//   }\r\n//   this.props.onSubmit(this.state.query);\r\n//   this.setState({\r\n//     query: \"\",\r\n//   });\r\n// };\r\n\r\n// render() {\r\n//   return (\r\n//     <header className=\"Searchbar\">\r\n//       <form onSubmit={this.handleSubmit} className=\"SearchForm\">\r\n//         <button type=\"submit\" className=\"SearchForm-button\">\r\n//           <span className=\"SearchForm-button-label\">Search</span>\r\n//         </button>\r\n\r\n//         <input\r\n//           value={this.state.query}\r\n//           onChange={this.handleChangeQuery}\r\n//           className=\"SearchForm-input\"\r\n//           type=\"text\"\r\n//           autoComplete=\"off\"\r\n//           autoFocus\r\n//           placeholder=\"Search images and photos\"\r\n//         />\r\n//       </form>\r\n//     </header>\r\n//   );\r\n// }\r\n// }\r\n\r\n// export default Searchbar;\r\n","import react from \"react\";\r\n\r\nfunction ImageGalleryItem({\r\n  image,\r\n  toggleModal,\r\n  handleSetLargeImageURL,\r\n  largeImageURL,\r\n}) {\r\n  const handleClick = (e) => {\r\n    toggleModal();\r\n    handleSetLargeImageURL({ largeImageURL });\r\n  };\r\n\r\n  return (\r\n    <li className=\"ImageGalleryItem\">\r\n      <img\r\n        src={image.webformatURL}\r\n        onClick={handleClick}\r\n        alt=\"\"\r\n        className=\"ImageGalleryItem-image\"\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default ImageGalleryItem;\r\n","import react from \"react\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\n\r\nconst ImageGallery = ({ images, toggleModal, handleSetLargeImageURL }) => {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {images.map((image) => (\r\n        <ImageGalleryItem\r\n          key={image.id}\r\n          image={image}\r\n          toggleModal={toggleModal}\r\n          largeImageURL={image.largeImageURL}\r\n          handleSetLargeImageURL={handleSetLargeImageURL}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;\r\n","import react from \"react\";\r\n\r\nfunction Button({ onLoadMore }) {\r\n  return (\r\n    <button className=\"Button\" type=\"button\" onClick={onLoadMore}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n","import react, { useEffect } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nexport default function Modal({ onClose, children }) {\r\n  useEffect(() => {\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", handleKeyDown);\r\n    };\r\n  });\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  const handleBackDropClick = (event) => {\r\n    if (event.currentTarget === event.target) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return createPortal(\r\n    <div className=\"Overlay\" onClick={handleBackDropClick}>\r\n      <div className=\"Modal\">{children}</div>\r\n    </div>,\r\n    modalRoot\r\n  );\r\n}\r\n","import axios from 'axios';\r\n\r\naxios.defaults.baseURL = 'https://pixabay.com/api/';\r\nconst API_KEY = '23079700-bbc75e3a6b7c3c448487aea29';\r\n\r\nexport function getPictures( {nextQuery, page} ) {\r\n  return axios\r\n    .get(\r\n      `?image_type=photo&orientation=horizontal&q=${nextQuery}&page=${page}&per_page=12&key=${API_KEY}`\r\n    )\r\n    .then((res) => res.data.hits)\r\n    \r\n}\r\n\r\n\r\n","import Searchbar from \"./components/Searchbar/Searchbar\";\r\nimport ImageGallery from \"./components/ImageGallery/ImageGallery\";\r\nimport Button from \"./components/Button/Button\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Modal from \"./components/Modal/Modal\";\r\nimport { getPictures } from \"./servises/api-services\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport s from \"./App.module.css\";\r\nimport { ToastContainer, Flip } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nexport default function App() {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [hits, setHits] = useState([]);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [largeImageURL, setlargeImageURL] = useState(\"\");\r\n  const [page, setPage] = useState(1);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleSearchForm = (query) => {\r\n    setQuery(query);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (query.trim() === \"\") {\r\n      return;\r\n    }\r\n    setPage(1);\r\n    setHits([]);\r\n    getImages( {nextQuery: query, page: page} );\r\n  }, [query]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (page === 1) {\r\n      return;\r\n    }\r\n     getImages({nextQuery: query, page: page});\r\n  }, [ page]);\r\n\r\n\r\n  const getImages = ({ nextQuery, page }) => {\r\n    getPictures({ nextQuery, page })\r\n      .then(data => {\r\n         setHits(prev => [...prev, ...data]);\r\n      })\r\n      .then(() => {\r\n        return window.scrollTo({\r\n          top: document.documentElement.scrollHeight,\r\n          behavior: \"smooth\",\r\n        });\r\n      })\r\n      .catch((error) => console.log(\"error\"));\r\n  };\r\n\r\n  const toggleModal = () => {\r\n    setShowModal(() => !showModal);\r\n  };\r\n\r\n  const handleSetLargeImageURL = (largeImageURL) => {\r\n    setlargeImageURL(largeImageURL);\r\n  };\r\n\r\n  const loadMorePicsBttn = () => {\r\n    setIsLoading(true);\r\n    setPage((prevState) => prevState + 1);\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const renderLoadMoreBttn = hits.length > 0 && !isLoading;\r\n\r\n  return (\r\n    <div className={s.App}>\r\n      <Searchbar onSubmit={handleSearchForm} />\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        transition={Flip}\r\n        autoClose={3000}\r\n        theme={\"dark\"}\r\n      />\r\n      <ImageGallery\r\n        images={hits}\r\n        toggleModal={toggleModal}\r\n        handleSetLargeImageURL={handleSetLargeImageURL}\r\n      />\r\n\r\n      {renderLoadMoreBttn && <Button onLoadMore={loadMorePicsBttn} />}\r\n\r\n      <div className={s.loaderwrapper}>\r\n        {isLoading && (\r\n          <Loader\r\n            type=\"Rings\"\r\n            color=\"#00BFFF\"\r\n            height={100}\r\n            width={100}\r\n            timeout={3000}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {showModal && (\r\n        <Modal onClose={toggleModal}>\r\n          <img src={largeImageURL} alt=\"\" />\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// class App extends Component {\r\n//   state = {\r\n//     query: \"\",\r\n//     hits: [],\r\n//     showModal: false,\r\n//     largeImageURL: \"\",\r\n//     page: 1,\r\n//     isLoading: false,\r\n//   };\r\n\r\n//   handleSearchForm = (query) => {\r\n//     this.setState({ query });\r\n//   };\r\n\r\n// componentDidUpdate(prevProps, prevState) {\r\n//   const prevQuery = prevState.query;\r\n//   const nextQuery = this.state.query;\r\n//   const page = this.state.page;\r\n\r\n  // if (nextQuery !== prevQuery) {\r\n  //   this.setState({ page: 1, hits: [] });\r\n  //   this.getImages({ nextQuery: nextQuery, page: 1 });\r\n  // }\r\n\r\n  // if (page !== prevState.page && page !== 1) {\r\n  //   this.getImages({ nextQuery: nextQuery, page: page });\r\n  // }\r\n// }\r\n\r\n// getImages = (nextQuery, page) => {\r\n//   getPictures(nextQuery, page)\r\n//     .then((data) => {\r\n//       this.setState((prevState) => ({\r\n//         hits: [...prevState.hits, ...data],\r\n//       }));\r\n//     })\r\n//     .then(() => {\r\n//       return window.scrollTo({\r\n//         top: document.documentElement.scrollHeight,\r\n//         behavior: \"smooth\",\r\n//       });\r\n//     })\r\n//     .catch((error) => this.setState({ error, status: \"rejected\" }));\r\n// };\r\n\r\n// toggleModal = () => {\r\n//   this.setState((state) => ({\r\n//     showModal: !state.showModal,\r\n//   }));\r\n// };\r\n\r\n// handleSetLargeImageURL = (largeImageURL) => {\r\n//   this.setState(largeImageURL);\r\n// };\r\n\r\n// loadMorePicsBttn = () => {\r\n//   this.setState({ isLoading: true });\r\n//   this.setState((prevState) => ({\r\n//     page: prevState.page + 1,\r\n//   }));\r\n//  this.setState({ isLoading: false });\r\n// };\r\n\r\n//   render() {\r\n// const { showModal, largeImageURL, isLoading, hits } = this.state;\r\n// const renderLoadMoreBttn = hits.length > 0 && !isLoading;\r\n\r\n// return (\r\n//   <div className={s.App}>\r\n//     <Searchbar onSubmit={this.handleSearchForm} />\r\n//     <ToastContainer\r\n//       position=\"top-right\"\r\n//       transition={Flip}\r\n//       autoClose={3000}\r\n//       theme={\"dark\"}\r\n//     />\r\n//     <ImageGallery\r\n//       images={hits}\r\n//       toggleModal={this.toggleModal}\r\n//       handleSetLargeImageURL={this.handleSetLargeImageURL}\r\n//     />\r\n\r\n//     {renderLoadMoreBttn && <Button onLoadMore={this.loadMorePicsBttn} />}\r\n\r\n//     <div className={s.loaderwrapper}>\r\n//       {isLoading && (\r\n//         <Loader\r\n//           type=\"Rings\"\r\n//           color=\"#00BFFF\"\r\n//           height={100}\r\n//           width={100}\r\n//           timeout={3000}\r\n//         />\r\n//       )}\r\n//     </div>\r\n\r\n//     {showModal && (\r\n//       <Modal onClose={this.toggleModal}>\r\n//         <img src={largeImageURL} alt=\"\" />\r\n//       </Modal>\r\n//     )}\r\n//   </div>\r\n// );\r\n//   }\r\n// }\r\n\r\n// export default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}